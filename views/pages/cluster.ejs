<%- include('../includes/head'); -%>
<%- include('../includes/top') -%>
<%- include('../includes/nav') -%>
<%- include('../includes/content') -%>

<div class="row" id="clusterControler">

   <div class="col-md-12" v-for="cluster in clusters">
      <div class="card collapsed-card">

         <div class="card-header card-widget widget-user p-0">
            <div class="card-title0" style="width: 100%">
               <div class="widget-user-header text-white p-0" :style="`background: url('${servers[cluster.servers[0].server] ? servers[cluster.servers[0].server].bgicon : '/img/backgrounds/Ragnarok.jpg'}') center center;`">
                  <div style="background-color: rgba(66,66,66,0.30)!important; height: 100%" class="p-3">
                     <h3 class="widget-user-username text-center text-light left">{{ cluster.name }}</h3>
                     <h5 class="widget-user-desc text-center text-light">{{ cluster.clusterid }}</h5>
                  </div>
               </div>

               <div class="widget-user-image" id="serv_img" style="z-index: 1000"><img :src="servers[cluster.servers[0].server] ? servers[cluster.servers[0].server].icon : '/img/maps/Ragnarok.jpg'" style="border-radius: 25rem !important;border-top-width: 3px!important;height: 90px;width: 90px;background-color: #001f3f" class="border-dark"></div>
               <div class="widget-user mb-0 row">
                  <div class="col-6 pr-0 text-left left d-inline" style="width:50%">
                     <button style="width: 100%" class="btn btn-flat btn-dark" data-card-widget="collapse">
                        <i class="fas fa-plus" aria-hidden="true"></i>
                     </button>
                  </div>
                  <div class="col-6 pl-0 right-no-top ml-auto d-inline" style="width:50%">
                     <button aria-hidden="true" style="width: 100%" class="text-white btn-flat btn btn-danger ">
                        <i class="nav-icon fa fa-trash" aria-hidden="true"></i>
                        Cluster Löschen
                     </button>
                  </div>
               </div>
            </div>
         </div>

         <div class="card-body" style="display: none">

            <a style="width: 100%" href="#" class="nav-link btn btn-flat btn-dark">
               <i class="nav-icon fa fa-plus" aria-hidden="true"></i>
               Server Hinzufügen
            </a>

            <div class="row">
               <div class="col-12">
                  <table class="table table-striped table-valign-middle border" style="width: 100%">
                     <thead>
                     <tr>
                        <th>Server</th>
                        <th>Spieler</th>
                        <th>Status</th>
                        <th>Rang</th>
                        <th></th>
                     </tr>
                     </thead>
                     <tbody>

                     <tr v-for="server in cluster.servers" class="p-1" v-if="servers[server.server]">
                        <td>{{ servers[server.server].selfname }}</td>

                        <td class="text-dark"><b>{{ servers[server.server].aplayers }}</b> / {{ servers[server.server].players }}</td>

                        <td :class="`text-${stateColor(servers[server.server])}`">{{ globalvars.lang_arr.forservers.state[stateColor(servers[server.server])] }}</td>

                        <td v-if="server.type === 1" class="text-danger"><b>Master</b></td>
                        <td v-else class="text-green"><b>Slave</b></td>

                        <td style="width: 1%">
                           <div class="btn-group btn-group-sm">
                              <a v-if="server.type === 0" data-toggle="tooltip" href="javascript:void(0)" class="btn btn-primary btn-sm">
                                 <i class="fas fa-angle-double-up" aria-hidden="true"></i>
                              </a>

                              <a href="javascript:void(0)" class="btn btn-danger btn-sm"><i class="far fa-trash-alt" aria-hidden="true"></i></a>
                           </div>
                        </td>
                     </tr>

                     </tbody>
                  </table>
               </div>
            </div>
            <div class="row">
               <div class="col-6">
                  <table class="table table-striped table-valign-middle border m-0" style="width: 100%">
                     <tbody>
                        <tr>
                           <th class="bg-dark">
                              <h5 class="m-0">Synchronisierungen</h5>
                           </th>
                        </tr>
                        <tr v-for="(item, key) in cluster.sync">
                           <td class="p-1">
                              <button style="min-width: 32px" class="btn mr-2 btn-sm" v-bind:class="item ? 'btn-success' : 'btn-danger'">
                                 <i v-bind:class="item ? 'fas fa-check' : 'fas fa-times'"></i>
                              </button>
                              {{ key }}
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <div class="col-6">
                  <table class="table table-striped table-valign-middle border m-0" style="width: 100%">
                     <tbody>
                        <tr>
                           <th class="bg-dark">
                              <h5 class="m-0">Optionen</h5>
                           </th>
                        </tr>
                        <tr v-for="(item, key) in cluster.opt">
                           <td class="p-1">
                              <button style="min-width: 32px" class="btn mr-2 btn-sm" v-bind:class="item ? 'btn-success' : 'btn-danger'">
                                 <i v-bind:class="item ? 'fas fa-check' : 'fas fa-times'"></i>
                              </button>
                              {{ key }}
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
         </div>
      </div>
   </div>

</div>

<script>
   // Vars die zur JS übergeben werden
   // Allgemeine Vars
   let vars = {}
</script>

<script src="/js/kadmin/cluster.js" type="application/javascript"></script>
<%- include('../includes/foother') -%>