<%- include('../../includes/head'); -%>
<%- include('../../includes/top') -%>
<%- include('../../includes/nav') -%>
<%- include('../../includes/content') -%>
<%- include('./head'); -%>
<div class="row" id="modsContainer">
    <div class="col-12">
        <div class="d-flex bg-dark p-2">
            <h5 class="m-0 mt-1 ml-1">
                <i aria-hidden="true" class="fas pr-1" v-bind:class="listAktiveMods ? 'fa-tasks' : 'fa-hdd'"></i>
                {{listAktiveMods ? 'Active mods' : 'Installed Mods'}}
            </h5>
            <div class="btn-group btn-group-sm ml-auto">
                <a href="javascript:void(0)" id="FB_upload" class="btn btn-sm btn-outline-success">
                    <i aria-hidden="true" class="fas fa-plus"></i>
                </a>
                <a href="javascript:void(0)" id="FB_upload" class="btn btn-sm btn-outline-light" @click="listAktiveMods = !listAktiveMods">
                    <i aria-hidden="true" class="fas" v-bind:class="!listAktiveMods ? 'fa-tasks' : 'fa-hdd'"></i>
                </a>
            </div>
        </div>
    </div>

    <div class="col-12">
        <table class="table table-sm table-striped table-bordered">
            <tbody>

                <tr v-for="(mod, key) in listAktiveMods ? mods : installedMods">
                    <td width="20px" class="p-0">
                        <a href="javascript:void(0)" id="FB_upload" v-bind:class="listAktiveMods && key !== 0 && mods.length !== 1 ? '' : 'disabled'" class="btn btn-sm btn-flat bg-dark m-0">
                            <i class="fas fas fa-arrow-up"></i>
                        </a>
                        <a v-bind:class="listAktiveMods && key !== mods.length-1 ? '' : 'disabled'" href="javascript:void(0)" id="FB_upload" class="btn btn-sm btn-flat bg-dark m-0">
                            <i class="fas fas fa-arrow-down"></i>
                        </a>
                    </td>
                    <td width="62px" class="p-0"><img :src="steamAPI[mod] !== undefined ? steamAPI[mod].preview_url : '/img/unknown.png'" style="width: 62px; height: 62px" /></td>
                    <td>
                        <b>[{{key}}] {{steamAPI[mod] !== undefined ? steamAPI[mod].title : mod}}</b> <br />
                        <span class="text-sm">ModID: <a class="text-bold" :href="`https://steamcommunity.com/sharedfiles/filedetails/?id=${mod}`" target="_blank">{{ mod }}</a> | Last Updated: <b>{{ convertTime(steamAPI[mod].time_updated*1000) }}</b></span>
                    </td>
                    <td style="width: 1%" class="p-0">
                        <div class="btn-group">
                            <a v-if="!checkIsInstalled(mod)" href="javascript:void(0)" id="FB_upload" class="btn btn-app bg-success m-0">
                                <i class="fas fa-folder-plus"></i> Install
                            </a>
                            <a v-else href="javascript:void(0)" id="FB_upload" class="btn btn-app bg-danger m-0">
                                <i class="fas fa-folder-minus"></i> Uninstall
                            </a>

                            <a v-if="mods.includes(mod)" href="javascript:void(0)" class="btn btn-app bg-danger m-0">
                                <i aria-hidden="true" class="fa fa-times"></i> Deactivate
                            </a>

                            <a v-else href="javascript:void(0)" class="btn btn-app bg-success m-0">
                                <i aria-hidden="true" class="fa fa-check"></i> Activate
                            </a>

                            <a href="javascript:void(0)" class="btn btn-app bg-danger m-0">
                                <i aria-hidden="true" class="fa fa-trash"></i> Remove
                            </a>
                        </div>
                    </td>
                </tr>

            </tbody>
        </table>

    </div>
</div>


<script>
    // Vars die zur JS Ã¼bergeben werden
    // Allgemeine Vars
    let vars = {};
    vars.cfg = '<%- serverName %>';
</script>

<script src="/js/kadmin/serverCenter/mods.js" type="application/javascript"></script>

<%- include('../../includes/foother'); -%>